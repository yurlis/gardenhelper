const webSiteUrl="http://gardenhelper-master.local/";function testWebP(e){var n=new Image;n.onload=n.onerror=function(){e(2==n.height)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){$.each($(".ibg"),(function(e,n){$(this).find("img").length>0&&$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")')}))}function mainblock(){var e=$(window).outerHeight();$(".mainblock").css("min-height",e)}function windowLoad(e){var n=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){n&&n(),e()}}function documentReady(e){var n=document.ready;"function"!=typeof document.ready?document.ready=e:document.ready=function(){n&&n(),e()}}function isLogin(){$.ajax({url:webSiteUrl+"/modules/call.php?cmd=islogin",success:function(e){data=JSON.parse(e),data.status?($(".mainblock__btn").hide(),$.ajax({url:webSiteUrl+"/top-menu.html",dataType:"html",success:function(e){$(".header__container").append(e)}})):document.location.href!=webSiteUrl+"/"&&"http://gardenhelper.local/login.php"!=document.location.href&&"http://gardenhelper.local/registration.php"!=document.location.href&&"http://gardenhelper.local/verification.php"!=document.location.href&&(document.location.href=webSiteUrl)}})}function setChoice(e,n,t,o){return $(".login-form__info-block").hide(500,"linear"),$("input[name='"+t+"']").val(o),$("input[name='"+t+"id']").val(n),!1}testWebP((function(e){1==e&&document.querySelector("body").classList.add("webp")})),ibg(),$(window).resize((function(e){mainblock()})),mainblock(),$(".goto").click((function(){var e=$(this).attr("href").replace("#","");return $("body,html").animate({scrollTop:$("."+e).offset().top+0},500,(function(){})),$(".header-menu").hasClass("active")&&($(".header-menu,.header-menu__icon").removeClass("active"),$("body").removeClass("lock")),!1})),isLogin(),$(".registration-form__registration-button").click((function(e){e.preventDefault();var n=new FormData,t=$(this).parent(),o=t.find("input[name='name']").val(),a=t.find("input[name='email']").val(),i=t.find("input[name='phone']").val(),l=t.find("input[name='password']").val(),c=t.find("input[name='repassword']").val();return n.append("name",o),n.append("email",a),n.append("phone",i),n.append("password",l),n.append("repassword",c),$.ajax({url:webSiteUrl+"/modules/call.php?cmd=registration",dataType:"text",cache:!1,contentType:!1,processData:!1,data:n,type:"POST",success:function(e){data=JSON.parse(e),$(".registration-form__info-block").hide(500,"linear"),$(".info-block__content").html(data.message),$(".registration-form__info-block").show(500,"linear"),data.status&&setTimeout((function(){$(".registration-form__info-block").hide(500,"linear"),document.location.href=webSiteUrl+"/login.php"}),1500)}}),!1})),$(".login-form__login-button").click((function(e){e.preventDefault();var n=new FormData,t=$(this).parent(),o=t.find("input[name='phone']").val(),a=t.find("input[name='password']").val();return n.append("phone",o),n.append("password",a),$.ajax({url:webSiteUrl+"/modules/call.php?cmd=login",dataType:"text",cache:!1,contentType:!1,processData:!1,data:n,type:"POST",success:function(e){data=JSON.parse(e),$(".login-form__info-block").hide(500,"linear"),$(".info-block__content").html(data.message),$(".login-form__info-block").show(500,"linear"),data.status&&setTimeout((function(){$(".registration-form__info-block").hide(500,"linear"),document.location.href=webSiteUrl}),2e3)}}),!1})),$(window).ready((function(){$(".form-selectblock__select").length&&$.ajax({url:webSiteUrl+"/modules/call.php?cmd=getzones",success:function(e){if(data=JSON.parse(e),data.status){for(var n=0;n<data.zones.length;)$(".form-selectblock__select select").append('<option value="'+data.zones[n].id+'">'+data.zones[n].name+"</option>"),n++;$('.form-selectblock__select select option[value="'+data.user_zone_id+'"]').attr("selected","selected")}}})})),$(".__plant").click((function(e){return e.preventDefault(),$.ajax({url:webSiteUrl+"/modules/call.php?cmd=getplants",success:function(e){$(".login-form__info-block").hide(500,"linear"),$(".info-block__content").html(e),$(".login-form__info-block").show(500,"linear");$("body,html").animate({scrollTop:$(".gh-form__confirm-btn").offset().top+0},500,(function(){}))}}),!1})),$(".__seller").click((function(e){return e.preventDefault(),$.ajax({url:webSiteUrl+"/modules/call.php?cmd=getsellers",success:function(e){$(".login-form__info-block").hide(500,"linear"),$(".info-block__content").html(e),$(".login-form__info-block").show(500,"linear");$("body,html").animate({scrollTop:$(".gh-form__confirm-btn").offset().top+0},500,(function(){}))}}),!1})),$(".gh-form__confirm-btn").click((function(e){e.preventDefault();var n=new FormData,t=$(this).parent(),o=t.find("input[name='plantid']").val(),a=t.find("select").val(),i=t.find("input[name='sellerid']").val(),l=t.find("textarea[name='comment']").val(),c=t.find("input[name='check1']").val(),r=t.find("input[name='date']").val(),d=t.find("input[name='check2']").val();return n.append("plantid",o),n.append("zone",a),n.append("sellerid",i),n.append("comment",l),n.append("planted",c),n.append("date",r),n.append("follow",d),$.ajax({url:webSiteUrl+"/modules/call.php?cmd=addplant",dataType:"text",cache:!1,contentType:!1,processData:!1,data:n,type:"POST",success:function(e){""==e&&(document.location.href=webSiteUrl),data=JSON.parse(e),$(".login-form__info-block").hide(500,"linear"),$(".info-block__content").html(data.message),$(".login-form__info-block").show(500,"linear"),data.status&&setTimeout((function(){$(".registration-form__info-block").hide(500,"linear"),document.location.href=webSiteUrl}),2e3)}}),!1})),$("input[type='checkbox']").click((function(e){var n=$(this).val();$(this).val("off"==n?"on":"off")}));